End-to-end tests for the code generator and runtime.  Read test.py first.